<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <style>
      body {
        padding-top: 70px;
      }

      table th {
        width: 12%;
        background-color: #fff;
      }

      /* RWD Table */
      #weekNav,
      #dateNav {
        position: fixed;
        overflow: hidden;
        visibility: hidden;
      }
      .rwd-table-nav > table {
        border: 0;
      }
      /* RWD Table Bootstrap fix */
      @media screen and (max-width: 767px) {
        .rwd-table-nav > .table-bordered {
          border: 0;
        }
        .rwd-table-nav > .table-bordered > thead > tr > th:first-child,
        .rwd-table-nav > .table-bordered > tbody > tr > th:first-child,
        .rwd-table-nav > .table-bordered > tfoot > tr > th:first-child,
        .rwd-table-nav > .table-bordered > thead > tr > td:first-child,
        .rwd-table-nav > .table-bordered > tbody > tr > td:first-child,
        .rwd-table-nav > .table-bordered > tfoot > tr > td:first-child {
          border-left: 0;
        }
        .rwd-table-nav > .table-bordered > thead > tr > th:last-child,
        .rwd-table-nav > .table-bordered > tbody > tr > th:last-child,
        .rwd-table-nav > .table-bordered > tfoot > tr > th:last-child,
        .rwd-table-nav > .table-bordered > thead > tr > td:last-child,
        .rwd-table-nav > .table-bordered > tbody > tr > td:last-child,
        .rwd-table-nav > .table-bordered > tfoot > tr > td:last-child {
          border-right: 0;
        }
        .rwd-table-nav > .table-bordered > tbody > tr:last-child > th,
        .rwd-table-nav > .table-bordered > tfoot > tr:last-child > th,
        .rwd-table-nav > .table-bordered > tbody > tr:last-child > td,
        .rwd-table-nav > .table-bordered > tfoot > tr:last-child > td {
          border-bottom: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="#"
              >RWD Table with 2 Layer Fixed Head</a
            >
          </div>
        </div>
      </nav>

      <h2>RWD Table with 2 Layer Fixed Head</h2>

      <hr />

      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th></th>
              <th>Sunday</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>
          </thead>
          <tbody>
            <tr class="active tr-date-head">
              <td></td>
              <td>01/01</td>
              <td>01/02</td>
              <td>01/03</td>
              <td>01/04</td>
              <td>01/05</td>
              <td>01/06</td>
              <td>01/07</td>
            </tr>
            <tr>
              <td>John</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Eric</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Rex</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Derrick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Somi</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Nick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr class="active tr-date-head">
              <td></td>
              <td>01/08</td>
              <td>01/09</td>
              <td>01/10</td>
              <td>01/11</td>
              <td>01/12</td>
              <td>01/13</td>
              <td>01/14</td>
            </tr>
            <tr>
              <td>John</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Eric</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Rex</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Derrick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Somi</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Nick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr class="active tr-date-head">
              <td></td>
              <td>01/15</td>
              <td>01/16</td>
              <td>01/17</td>
              <td>01/18</td>
              <td>01/19</td>
              <td>01/20</td>
              <td>01/21</td>
            </tr>
            <tr>
              <td>John</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Eric</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Rex</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Derrick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Somi</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Nick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr class="active tr-date-head">
              <td></td>
              <td>01/22</td>
              <td>01/23</td>
              <td>01/24</td>
              <td>01/25</td>
              <td>01/26</td>
              <td>01/27</td>
              <td>01/28</td>
            </tr>
            <tr>
              <td>John</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Eric</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Rex</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Derrick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Somi</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Nick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr class="active tr-date-head">
              <td></td>
              <td>01/29</td>
              <td>01/30</td>
              <td>01/31</td>
              <td>02/01</td>
              <td>02/02</td>
              <td>02/03</td>
              <td>02/04</td>
            </tr>
            <tr>
              <td>John</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Eric</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Rex</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Derrick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Somi</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>Nick</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
   
    <script>
      /**
       * @author  Nick Tsai <myintaer@gmail.com
       * @todo    OO & Componentization
       */
      (function() {
        "use strict";

        // For sensitive date change
        var sensitiveMode = true;
        var $navbar = $(".navbar-fixed-top");
        var $tableWrapper = $(".table-responsive");
        var $table = $tableWrapper.find("table");
        var $layer1 = $table.find("thead");
        var $layer2 = $table.find(".tr-date-head");
        var nampspace = "rwd-table-2layers";

        /* Layer 1 */
        var $weekNav = $(
          '<div id="weekNav" class="rwd-table-nav"></div>'
        ).insertBefore($table);

        // Clone table to weekNav
        $weekNav.empty();
        $weekNav.append($table.clone().attr("id", "week-table"));

        /* Layer 2 */
        var $dateNav = $(
          '<div id="dateNav" class="rwd-table-nav"></div>'
        ).insertBefore($table);

        // Clone table to weekNav
        $dateNav.empty();
        $dateNav.append($table.clone().attr("id", "date-table"));
        var $dateTable = $dateNav.find("table");

        var navbarHeight = 0;

        var init = function() {
          // Set navbar height
          navbarHeight = $navbar.outerHeight() || navbarHeight;

          var wrapperBodyWidth = $tableWrapper
            ? $tableWrapper.width()
            : $table.outerWidth();
          var thHeight = $layer1.outerHeight();
          var trHeight = $layer2.outerHeight();

          /* Week Nav */
          $weekNav.css("top", navbarHeight);
          $weekNav.css("width", wrapperBodyWidth);
          $weekNav.css("height", thHeight);

          /* Date Nav */
          $dateNav.css("top", navbarHeight + $weekNav.outerHeight());
          $dateNav.css("width", wrapperBodyWidth);
          $dateNav.css("height", trHeight);

          $(window).scroll();
        };

        $(window)
          .off("resize." + nampspace)
          .on("resize." + nampspace, function() {
            // console.log('Resize')

            init();
          });

        $(window)
          .off("scroll." + nampspace)
          .on("scroll." + nampspace, function() {
            // console.log('Scroll')

            /* Dynamic calculating for unexpected situation */

            var divideScrollTop = $(window).scrollTop() + navbarHeight;

            var tablePosition = $table.offset().top;

            /* 2 Lyaer Visibility Statement */

            if (tablePosition - 1 <= divideScrollTop) {
              $weekNav.css("visibility", "visible");
              $dateNav.css("visibility", "visible");
            } else {
              $weekNav.css("visibility", "hidden");
              $dateNav.css("visibility", "hidden");
            }

            /* Date Nav dynamic TR shift */

            // Data Nav divideScrollTop
            divideScrollTop += $weekNav.outerHeight();

            if (sensitiveMode) {
              divideScrollTop += $dateNav.outerHeight();
            }

            var marginTopdiff = 0;

            $layer2.each(function() {
              var eachPosition = $(this).offset().top;
              var marginPosition = $(this).offset().top - tablePosition;

              if (eachPosition <= divideScrollTop) {
                marginTopdiff = marginPosition;
              }
            });

            $dateTable.css("margin-top", 0 - marginTopdiff);
          });

        // Layers' y axis followes main table wrappper
        $tableWrapper
          .off("scroll." + nampspace)
          .on("scroll." + nampspace, function() {
            // console.log('scroll TableWrapper')

            var currentScrollLeftPosition = $(this).scrollLeft();

            $weekNav.scrollLeft(currentScrollLeftPosition);

            $dateNav.scrollLeft(currentScrollLeftPosition);
          });

        init();
      })();
    </script>


  </body>
</html>
